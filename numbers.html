<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مسابقة الحروف الثقافية</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex-grow: 1;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff4757, #2ed573);
        }

        .school-info {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .school-info h2 {
            font-size: 28px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .school-info p {
            font-size: 18px;
            opacity: 0.9;
        }

        .title {
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff4757, #2ed573);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .game-board {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .board-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            margin: 30px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .letter-cell {
            aspect-ratio: 1;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
            border: 3px solid #dee2e6;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: #495057;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .letter-cell:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .letter-cell.red {
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
            border-color: #ff4757;
        }

        .letter-cell.green {
            background: linear-gradient(45deg, #2ed573, #7bed9f);
            color: white;
            border-color: #2ed573;
        }

        .teams-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .team {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        .team:hover {
            transform: translateY(-10px);
        }

        .team.red {
            border-top: 5px solid #ff4757;
        }

        .team.green {
            border-top: 5px solid #2ed573;
        }

        .team h3 {
            font-size: 28px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .team.red h3 {
            color: #ff4757;
        }

        .team.green h3 {
            color: #2ed573;
        }

        .team-objective {
            font-size: 18px;
            color: #6c757d;
            font-weight: 500;
        }

        .rules-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .rules-title {
            font-size: 32px;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .rule-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            border-right: 5px solid #007bff;
            transition: transform 0.3s ease;
        }

        .rule-card:hover {
            transform: translateX(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .rule-card h4 {
            color: #007bff;
            font-size: 20px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .rule-card p {
            color: #495057;
            line-height: 1.6;
            font-size: 16px;
        }

        .special-features {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: #2c3e50;
        }

        .special-features h4 {
            font-size: 22px;
            margin-bottom: 15px;
            color: #d35400;
        }

        .footer {
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 20px 20px 0 0;
            margin-top: auto;
            backdrop-filter: blur(10px);
        }

        .footer h3 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #3498db;
        }

        .footer p {
            font-size: 18px;
            margin: 5px 0;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 36px;
            }
            
            .teams-section {
                grid-template-columns: 1fr;
            }
            
            .board-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .rules-grid {
                grid-template-columns: 1fr;
            }
        }

        .floating-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-letter {
            position: absolute;
            color: rgba(255, 255, 255, 0.1);
            font-size: 100px;
            font-weight: bold;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-20px) rotate(5deg); opacity: 0.2; }
        }

        .question-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .question-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
        }

        .question-header {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .current-team {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 15px;
        }

        .team-red-turn {
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
        }

        .team-green-turn {
            background: linear-gradient(45deg, #2ed573, #7bed9f);
            color: white;
        }

        .question-subject {
            background: linear-gradient(45deg, #3742fa, #5352ed);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 25px;
            display: inline-block;
        }

        .question-text {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 30px;
            line-height: 1.6;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border-right: 5px solid #3742fa;
        }

        .answer-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .answer-btn {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .correct-btn {
            background: linear-gradient(45deg, #2ed573, #7bed9f);
            color: white;
        }

        .correct-btn:hover {
            background: linear-gradient(45deg, #26d967, #70e39a);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(46, 213, 115, 0.3);
        }

        .wrong-btn {
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
        }

        .wrong-btn:hover {
            background: linear-gradient(45deg, #ff3742, #ff5765);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 71, 87, 0.3);
        }

        .team-selector {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .team-selector h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .team-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .team-btn {
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .team-red-btn {
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
        }

        .team-green-btn {
            background: linear-gradient(45deg, #2ed573, #7bed9f);
            color: white;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #c0392b;
            transform: rotate(90deg);
        }

        .show-answer-btn {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .show-answer-btn:hover {
            background: linear-gradient(45deg, #e67e22, #d35400);
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(243, 156, 18, 0.3);
        }

        .correct-answer {
            background: #e8f5e8;
            border: 2px solid #2ed573;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .correct-answer-text {
            color: #27ae60;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* شاشة الفوز */
        .victory-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .victory-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 60px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .victory-title {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff4757, #2ed573);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 2s infinite;
        }

        .victory-subtitle {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 30px;
            animation: slideInUp 1s ease;
        }

        .next-stage {
            font-size: 24px;
            color: #3498db;
            margin-top: 20px;
            font-weight: bold;
            animation: slideInUp 1.5s ease;
        }

        .restart-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            background: linear-gradient(45deg, #2980b9, #1f618d);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* الكونفيتي المتطاير */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff4757;
            animation: confetti-fall 3s linear infinite;
        }

        .confetti:nth-child(2n) {
            background: #2ed573;
            animation-delay: 0.5s;
            animation-duration: 3.5s;
        }

        .confetti:nth-child(3n) {
            background: #3742fa;
            animation-delay: 1s;
            animation-duration: 4s;
        }

        .confetti:nth-child(4n) {
            background: #f39c12;
            animation-delay: 1.5s;
            animation-duration: 4.5s;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* أشكال ثلاثية الأبعاد */
        .floating-3d {
            position: absolute;
            animation: float3d 4s ease-in-out infinite;
        }

        .trophy {
            font-size: 60px;
            color: #f39c12;
            animation: float3d 3s ease-in-out infinite;
        }

        .star {
            font-size: 40px;
            color: #e74c3c;
            animation: float3d 3.5s ease-in-out infinite reverse;
        }

        .medal {
            font-size: 50px;
            color: #2ed573;
            animation: float3d 4.5s ease-in-out infinite;
        }

        @keyframes float3d {
            0%, 100% { 
                transform: translateY(0px) rotateY(0deg) rotateX(0deg); 
            }
            50% { 
                transform: translateY(-30px) rotateY(180deg) rotateX(15deg); 
            }
        }
    </style>
</head>
<body>
    <div class="floating-elements">
        <div class="floating-letter" style="top: 10%; left: 10%; animation-delay: 0s;">أ</div>
        <div class="floating-letter" style="top: 20%; right: 15%; animation-delay: 1s;">ب</div>
        <div class="floating-letter" style="bottom: 20%; left: 20%; animation-delay: 2s;">ج</div>
        <div class="floating-letter" style="bottom: 10%; right: 10%; animation-delay: 3s;">د</div>
    </div>

    <div class="container">
        <div class="header">
            <div class="school-info">
                <h2>متوسطة ابن عمرو الأنصاري</h2>
                <p>مدير المدرسة: خالد المطيري</p>
            </div>
            
            <h1 class="title">🏆 مسابقة الحروف الثقافية 🏆</h1>
            <p class="subtitle">لعبة ثقافية تنافسية شيقة ومفيدة</p>
        </div>

        <div class="teams-section">
            <div class="team red">
                <h3>🔴 الفريق الأحمر</h3>
                <p class="team-objective">يسعى لتكوين خط أفقي<br>(من اليمين إلى اليسار)</p>
            </div>
            <div class="team green">
                <h3>🟢 الفريق الأخضر</h3>
                <p class="team-objective">يسعى لتكوين خط رأسي<br>(من الأعلى إلى الأسفل)</p>
            </div>
        </div>

        <div class="game-board">
            <h3 style="text-align: center; color: #2c3e50; font-size: 28px; margin-bottom: 20px;">
                🎯 لوحة اللعب
            </h3>
            <div class="board-grid">
                <div class="letter-cell">أ</div>
                <div class="letter-cell green">ب</div>
                <div class="letter-cell">ج</div>
                <div class="letter-cell red">د</div>
                <div class="letter-cell">هـ</div>
                <div class="letter-cell">و</div>
                <div class="letter-cell red">ز</div>
                <div class="letter-cell">ح</div>
                <div class="letter-cell">ط</div>
                <div class="letter-cell green">ي</div>
                <div class="letter-cell">ك</div>
                <div class="letter-cell">ل</div>
                <div class="letter-cell">م</div>
                <div class="letter-cell red">ن</div>
                <div class="letter-cell green">س</div>
                <div class="letter-cell">ع</div>
                <div class="letter-cell">ف</div>
                <div class="letter-cell">ق</div>
                <div class="letter-cell green">ر</div>
                <div class="letter-cell">ش</div>
                <div class="letter-cell">ت</div>
                <div class="letter-cell">ث</div>
                <div class="letter-cell red">خ</div>
                <div class="letter-cell">ذ</div>
            </div>
        </div>

        <div class="rules-section">
            <h2 class="rules-title">📋 قواعد اللعبة</h2>
            
            <div class="rules-grid">
                <div class="rule-card">
                    <h4>🎯 الهدف الأساسي</h4>
                    <p>توصيل أطراف لوحة اللعب بخطوط متصلة بلون الفريق للفوز بالجولة</p>
                </div>
                
                <div class="rule-card">
                    <h4>❓ آلية الأسئلة</h4>
                    <p>يطرح المذيع أسئلة ثقافية متنوعة على كلا الفريقين بالتناوب</p>
                </div>
                
                <div class="rule-card">
                    <h4>🎮 طريقة اللعب</h4>
                    <p>اختيار حرف من اللوحة، الإجابة على السؤال، وكسب الخلية عند الإجابة الصحيحة</p>
                </div>
                
                <div class="rule-card">
                    <h4>🏆 شروط الفوز</h4>
                    <p>تكوين خط كامل (أفقي للأحمر، رأسي للأخضر) لكسب الجولة</p>
                </div>
            </div>

            <div class="special-features">
                <h4>✨ المميزات الخاصة</h4>
                <p><strong>الأسئلة الذهبية:</strong> أسئلة خاصة يفوز بها من يجيب عليها بسبيكة ذهبية</p>
                <p><strong>السبائك الذهبية:</strong> يمكن للفريق الفائز الحصول على سبيكتين ذهبيتين بعد الإجابة على أسئلة في وقت محدد</p>
            </div>
        </div>
    </div>

    <!-- نافذة الأسئلة -->
    <div class="question-modal" id="questionModal">
        <div class="question-container">
            <button class="close-btn" onclick="closeQuestion()">×</button>
            
            <div class="question-header">🎯 سؤال المسابقة</div>
            
            <div class="current-team" id="currentTeam">دور الفريق الأحمر 🔴</div>
            
            <div class="question-subject" id="questionSubject">رياضيات</div>
            
            <div class="question-text" id="questionText">
                ما هو ناتج: 25 × 4 + 15 ÷ 3؟
            </div>

            <button class="show-answer-btn" onclick="showCorrectAnswer()">
                💡 عرض الإجابة الصحيحة
            </button>

            <div class="correct-answer" id="correctAnswer">
                <div class="correct-answer-text" id="correctAnswerText">
                    الإجابة الصحيحة: 105
                </div>
            </div>
            
            <div class="answer-buttons">
                <button class="answer-btn correct-btn" onclick="answerQuestion(true)">
                    ✓ إجابة صحيحة
                </button>
                <button class="answer-btn wrong-btn" onclick="answerQuestion(false)">
                    ✗ إجابة خاطئة
                </button>
            </div>
        </div>
    </div>

    <!-- شاشة الفوز -->
    <div class="victory-screen" id="victoryScreen">
        <div class="victory-content">
            <!-- الكونفيتي المتطاير -->
            <div class="confetti" style="left: 10%; animation-delay: 0s;"></div>
            <div class="confetti" style="left: 20%; animation-delay: 0.2s;"></div>
            <div class="confetti" style="left: 30%; animation-delay: 0.4s;"></div>
            <div class="confetti" style="left: 40%; animation-delay: 0.6s;"></div>
            <div class="confetti" style="left: 50%; animation-delay: 0.8s;"></div>
            <div class="confetti" style="left: 60%; animation-delay: 1s;"></div>
            <div class="confetti" style="left: 70%; animation-delay: 1.2s;"></div>
            <div class="confetti" style="left: 80%; animation-delay: 1.4s;"></div>
            <div class="confetti" style="left: 90%; animation-delay: 1.6s;"></div>

            <!-- المجسمات الثلاثية الأبعاد -->
            <div class="floating-3d trophy" style="top: 10%; left: 10%;">🏆</div>
            <div class="floating-3d star" style="top: 20%; right: 15%;">⭐</div>
            <div class="floating-3d medal" style="bottom: 20%; left: 15%;">🥇</div>
            <div class="floating-3d trophy" style="bottom: 10%; right: 10%;">🎉</div>
            <div class="floating-3d star" style="top: 30%; left: 30%;">✨</div>
            <div class="floating-3d medal" style="bottom: 30%; right: 25%;">🎊</div>

            <div class="victory-title" id="victoryTitle">🎉 ألف مبروك! 🎉</div>
            <div class="victory-subtitle" id="victorySubtitle">فوز الفريق الأحمر!</div>
            <div class="next-stage">🚀 مبروك الانتقال للمرحلة القادمة! 🚀</div>
            
            <button class="restart-btn" onclick="restartGame()">
                🔄 بداية جولة جديدة
            </button>
        </div>
    </div>

    <div class="footer">
        <h3>تنفيذ وإشراف</h3>
        <p>الأستاذ نواف الصبحي</p>
    </div>

    <script>
        // بنك الأسئلة للمرحلة المتوسطة مع الإجابات
        const questionBank = {
            رياضيات: [
                { q: "ما هو ناتج: 25 × 4 + 15 ÷ 3؟", a: "105" },
                { q: "ما هو مربع العدد 12؟", a: "144" },
                { q: "ما هو محيط المربع الذي طول ضلعه 8 سم؟", a: "32 سم" },
                { q: "ما هو ناتج: √64 + 6²؟", a: "44" },
                { q: "ما هو ناتج: (15 + 25) ÷ 8؟", a: "5" },
                { q: "كم يساوي 0.75 بالكسر الاعتيادي؟", a: "3/4" },
                { q: "ما هو مساحة المثلث الذي قاعدته 10 سم وارتفاعه 6 سم؟", a: "30 سم²" },
                { q: "ما هو العدد الأولي التالي بعد العدد 13؟", a: "17" },
                { q: "ما هو ناتج: 2³ × 3²؟", a: "72" },
                { q: "كم يساوي 35% من العدد 200؟", a: "70" }
            ],
            علوم: [
                { q: "ما هو الغاز الذي نتنفسه؟", a: "الأكسجين" },
                { q: "كم عدد عظام جسم الإنسان البالغ تقريباً؟", a: "206 عظمة" },
                { q: "ما هو أكبر كوكب في النظام الشمسي؟", a: "المشتري" },
                { q: "ما هي وحدة قياس القوة؟", a: "النيوتن" },
                { q: "ما هو الجهاز المسؤول عن ضخ الدم في الجسم؟", a: "القلب" },
                { q: "ما هي الحالة الفيزيائية للماء عند درجة حرارة 100 مئوية؟", a: "غاز (بخار)" },
                { q: "كم عدد أقمار كوكب الأرض؟", a: "قمر واحد" },
                { q: "ما هو الحيوان الذي يُعتبر من الثدييات المائية؟", a: "الحوت (أو الدولفين)" },
                { q: "ما هو المركب الكيميائي للماء؟", a: "H2O" },
                { q: "أين تقع أكبر عضلة في جسم الإنسان؟", a: "في الفخذ (العضلة الرباعية)" }
            ],
            قراءة: [
                { q: "من هو مؤلف رواية 'مدن الملح'؟", a: "عبد الرحمن منيف" },
                { q: "ما هو جمع كلمة 'كتاب'؟", a: "كتب" },
                { q: "ما هو مرادف كلمة 'شجاع'؟", a: "بطل أو جريء" },
                { q: "من هو الشاعر صاحب ديوان 'شوقي'؟", a: "أحمد شوقي" },
                { q: "ما هو الفعل من كلمة 'كاتب'؟", a: "كتب" },
                { q: "ما هو ضد كلمة 'النهار'؟", a: "الليل" },
                { q: "من هو صاحب معلقة 'قفا نبك'؟", a: "امرؤ القيس" },
                { q: "ما هو اسم المفعول من الفعل 'كتب'؟", a: "مكتوب" },
                { q: "أكمل البيت: 'العلم يرفع بيوتاً لا عماد لها...'", a: "والجهل يهدم بيت العز والشرف" },
                { q: "ما معنى كلمة 'المنارة'؟", a: "البرج المضيء أو الفنار" }
            ]
        };

        let currentCell = null;
        let currentTurn = 'red'; // red أو green
        let gameState = {}; // لحفظ حالة كل خلية
        let usedQuestions = new Set(); // لتتبع الأسئلة المستخدمة
        let currentQuestionData = null; // السؤال الحالي

        // تهيئة حالة اللعبة
        function initializeGame() {
            const cells = document.querySelectorAll('.letter-cell');
            cells.forEach((cell, index) => {
                if (!cell.classList.contains('red') && !cell.classList.contains('green')) {
                    gameState[index] = {
                        letter: cell.textContent,
                        owner: null,
                        currentQuestion: getRandomQuestion()
                    };
                }
            });
        }

        // الحصول على سؤال عشوائي
        function getRandomQuestion() {
            const subjects = Object.keys(questionBank);
            const subject = subjects[Math.floor(Math.random() * subjects.length)];
            const questions = questionBank[subject];
            
            let questionKey, questionObj;
            do {
                const questionIndex = Math.floor(Math.random() * questions.length);
                questionObj = questions[questionIndex];
                questionKey = subject + '-' + questionIndex;
            } while (usedQuestions.has(questionKey) && usedQuestions.size < getTotalQuestions());

            usedQuestions.add(questionKey);
            
            return {
                subject: subject,
                text: questionObj.q,
                answer: questionObj.a
            };
        }

        function getTotalQuestions() {
            return Object.values(questionBank).reduce((total, questions) => total + questions.length, 0);
        }

        // إضافة تأثيرات تفاعلية للخلايا
        const cells = document.querySelectorAll('.letter-cell');
        
        cells.forEach((cell, index) => {
            cell.addEventListener('click', function() {
                if (!this.classList.contains('red') && !this.classList.contains('green')) {
                    currentCell = { element: this, index: index };
                    showQuestion();
                }
            });
        });

        function showQuestion() {
            if (!currentCell || !gameState[currentCell.index]) return;
            
            const modal = document.getElementById('questionModal');
            const currentTeamEl = document.getElementById('currentTeam');
            const questionSubjectEl = document.getElementById('questionSubject');
            const questionTextEl = document.getElementById('questionText');
            const correctAnswerDiv = document.getElementById('correctAnswer');
            
            currentQuestionData = gameState[currentCell.index].currentQuestion;
            
            // إخفاء الإجابة الصحيحة
            correctAnswerDiv.style.display = 'none';
            
            // تحديث واجهة السؤال
            if (currentTurn === 'red') {
                currentTeamEl.textContent = 'دور الفريق الأحمر 🔴';
                currentTeamEl.className = 'current-team team-red-turn';
            } else {
                currentTeamEl.textContent = 'دور الفريق الأخضر 🟢';
                currentTeamEl.className = 'current-team team-green-turn';
            }
            
            questionSubjectEl.textContent = currentQuestionData.subject;
            questionTextEl.textContent = currentQuestionData.text;
            
            modal.style.display = 'flex';
        }

        function showCorrectAnswer() {
            const correctAnswerDiv = document.getElementById('correctAnswer');
            const correctAnswerText = document.getElementById('correctAnswerText');
            
            correctAnswerText.textContent = `الإجابة الصحيحة: ${currentQuestionData.answer}`;
            correctAnswerDiv.style.display = 'block';
        }

        function answerQuestion(isCorrect) {
            if (!currentCell) return;

            if (isCorrect) {
                // إجابة صحيحة - يكسب الفريق الخلية
                currentCell.element.classList.add(currentTurn);
                gameState[currentCell.index].owner = currentTurn;
                
                // تأثير بصري
                currentCell.element.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    currentCell.element.style.transform = 'scale(1)';
                }, 300);
                
                closeQuestion();
                
                // التحقق من الفوز
                if (checkWin(currentTurn)) {
                    showVictoryScreen(currentTurn);
                } else {
                    switchTurn();
                }
            } else {
                // إجابة خاطئة - ينتقل السؤال للفريق الآخر
                if (currentTurn === 'red') {
                    currentTurn = 'green';
                    showQuestion(); // إظهار نفس السؤال للفريق الآخر
                } else {
                    // كلا الفريقين أخطأ - تغيير السؤال والعودة للون المحايد
                    gameState[currentCell.index].currentQuestion = getRandomQuestion();
                    closeQuestion();
                    currentTurn = 'red'; // البداية بالفريق الأحمر
                }
            }
        }

        function switchTurn() {
            currentTurn = currentTurn === 'red' ? 'green' : 'red';
        }

        function closeQuestion() {
            const modal = document.getElementById('questionModal');
            modal.style.display = 'none';
            currentCell = null;
        }

        // التحقق من الفوز (4 في صف أفقي، رأسي، أو مائل)
        function checkWin(team) {
            const gridSize = 6; // عدد الأعمدة
            const totalCells = 24; // العدد الكلي للخلايا
            const cells = document.querySelectorAll('.letter-cell');
            
            // إنشاء شبكة من الحالات
            let grid = [];
            for (let i = 0; i < Math.ceil(totalCells / gridSize); i++) {
                grid[i] = [];
                for (let j = 0; j < gridSize; j++) {
                    const cellIndex = i * gridSize + j;
                    if (cellIndex < totalCells) {
                        grid[i][j] = cells[cellIndex].classList.contains(team) ? team : null;
                    } else {
                        grid[i][j] = null;
                    }
                }
            }
            
            // التحقق من 4 في صف أفقي
            for (let i = 0; i < grid.length; i++) {
                for (let j = 0; j <= gridSize - 4; j++) {
                    if (grid[i][j] === team && grid[i][j + 1] === team && 
                        grid[i][j + 2] === team && grid[i][j + 3] === team) {
                        return true;
                    }
                }
            }
            
            // التحقق من 4 في صف رأسي
            for (let i = 0; i <= grid.length - 4; i++) {
                for (let j = 0; j < gridSize; j++) {
                    if (grid[i] && grid[i + 1] && grid[i + 2] && grid[i + 3] &&
                        grid[i][j] === team && grid[i + 1][j] === team && 
                        grid[i + 2][j] === team && grid[i + 3][j] === team) {
                        return true;
                    }
                }
            }
            
            // التحقق من 4 في صف مائل (من اليسار لليمين)
            for (let i = 0; i <= grid.length - 4; i++) {
                for (let j = 0; j <= gridSize - 4; j++) {
                    if (grid[i] && grid[i + 1] && grid[i + 2] && grid[i + 3] &&
                        grid[i][j] === team && grid[i + 1][j + 1] === team && 
                        grid[i + 2][j + 2] === team && grid[i + 3][j + 3] === team) {
                        return true;
                    }
                }
            }
            
            // التحقق من 4 في صف مائل (من اليمين لليسار)
            for (let i = 0; i <= grid.length - 4; i++) {
                for (let j = 3; j < gridSize; j++) {
                    if (grid[i] && grid[i + 1] && grid[i + 2] && grid[i + 3] &&
                        grid[i][j] === team && grid[i + 1][j - 1] === team && 
                        grid[i + 2][j - 2] === team && grid[i + 3][j - 3] === team) {
                        return true;
                    }
                }
            }
            
            return false;
        }

        function showVictoryScreen(winningTeam) {
            const victoryScreen = document.getElementById('victoryScreen');
            const victorySubtitle = document.getElementById('victorySubtitle');
            
            if (winningTeam === 'red') {
                victorySubtitle.textContent = '🔴 فوز الفريق الأحمر! 🔴';
            } else {
                victorySubtitle.textContent = '🟢 فوز الفريق الأخضر! 🟢';
            }
            
            victoryScreen.style.display = 'flex';
            
            // إضافة المزيد من الكونفيتي
            setTimeout(() => {
                createMoreConfetti();
            }, 500);
        }

        function createMoreConfetti() {
            const victoryContent = document.querySelector('.victory-content');
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                victoryContent.appendChild(confetti);
                
                // حذف الكونفيتي بعد انتهاء الأنيمشن
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.parentNode.removeChild(confetti);
                    }
                }, 6000);
            }
        }

        function restartGame() {
            // إعادة تعيين اللعبة
            const cells = document.querySelectorAll('.letter-cell');
            cells.forEach(cell => {
                cell.classList.remove('red', 'green');
            });
            
            // إعادة تعيين المتغيرات
            currentTurn = 'red';
            gameState = {};
            usedQuestions.clear();
            
            // إخفاء شاشة الفوز
            document.getElementById('victoryScreen').style.display = 'none';
            
            // إعادة تهيئة اللعبة
            initializeGame();
        }

        // إضافة تأثير الانيمشن للعناصر عند التحميل
        window.addEventListener('load', function() {
            initializeGame();
            
            const elements = document.querySelectorAll('.rule-card, .team, .letter-cell');
            elements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    element.style.transition = 'all 0.6s ease';
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script> جسم الإنسان؟"
            ],
            قراءة: [
                "من هو مؤلف رواية 'مدن الملح'؟",
                "ما هو جمع كلمة 'كتاب'؟",
                "ما هو مرادف كلمة 'شجاع'؟",
                "من هو الشاعر الذي قال: 'المتنبي بشعره يملأ الدنيا ويشغل الناس'؟",
                "ما هو الفعل من كلمة 'كاتب'؟",
                "ما هو ضد كلمة 'النهار'؟",
                "من هو صاحب معلقة 'قفا نبك'؟",
                "ما هو اسم المفعول من الفعل 'كتب'؟",
                "أكمل البيت: 'العلم يرفع بيوتاً لا عماد لها...'",
                "ما هي أدوات الاستفهام؟"
            ]
        };

        let currentCell = null;
        let currentTurn = 'red'; // red أو green
        let gameState = {}; // لحفظ حالة كل خلية
        let usedQuestions = new Set(); // لتتبع الأسئلة المستخدمة

        // تهيئة حالة اللعبة
        function initializeGame() {
            const cells = document.querySelectorAll('.letter-cell');
            cells.forEach((cell, index) => {
                if (!cell.classList.contains('red') && !cell.classList.contains('green')) {
                    gameState[index] = {
                        letter: cell.textContent,
                        owner: null,
                        currentQuestion: getRandomQuestion()
                    };
                }
            });
        }

        // الحصول على سؤال عشوائي
        function getRandomQuestion() {
            const subjects = Object.keys(questionBank);
            const subject = subjects[Math.floor(Math.random() * subjects.length)];
            const questions = questionBank[subject];
            
            let questionKey, question;
            do {
                const questionIndex = Math.floor(Math.random() * questions.length);
                question = questions[questionIndex];
                questionKey = subject + '-' + questionIndex;
            } while (usedQuestions.has(questionKey) && usedQuestions.size < getTotalQuestions());

            usedQuestions.add(questionKey);
            
            return {
                subject: subject,
                text: question
            };
        }

        function getTotalQuestions() {
            return Object.values(questionBank).reduce((total, questions) => total + questions.length, 0);
        }

        // إضافة تأثيرات تفاعلية للخلايا
        const cells = document.querySelectorAll('.letter-cell');
        
        cells.forEach((cell, index) => {
            cell.addEventListener('click', function() {
                if (!this.classList.contains('red') && !this.classList.contains('green')) {
                    currentCell = { element: this, index: index };
                    showQuestion();
                }
            });
        });

        function showQuestion() {
            if (!currentCell || !gameState[currentCell.index]) return;
            
            const modal = document.getElementById('questionModal');
            const currentTeamEl = document.getElementById('currentTeam');
            const questionSubjectEl = document.getElementById('questionSubject');
            const questionTextEl = document.getElementById('questionText');
            
            const questionData = gameState[currentCell.index].currentQuestion;
            
            // تحديث واجهة السؤال
            if (currentTurn === 'red') {
                currentTeamEl.textContent = 'دور الفريق الأحمر 🔴';
                currentTeamEl.className = 'current-team team-red-turn';
            } else {
                currentTeamEl.textContent = 'دور الفريق الأخضر 🟢';
                currentTeamEl.className = 'current-team team-green-turn';
            }
            
            questionSubjectEl.textContent = questionData.subject;
            questionTextEl.textContent = questionData.text;
            
            modal.style.display = 'flex';
        }

        function answerQuestion(isCorrect) {
            if (!currentCell) return;

            if (isCorrect) {
                // إجابة صحيحة - يكسب الفريق الخلية
                currentCell.element.classList.add(currentTurn);
                gameState[currentCell.index].owner = currentTurn;
                
                // تأثير بصري
                currentCell.element.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    currentCell.element.style.transform = 'scale(1)';
                }, 300);
                
                closeQuestion();
                switchTurn();
            } else {
                // إجابة خاطئة - ينتقل السؤال للفريق الآخر
                if (currentTurn === 'red') {
                    currentTurn = 'green';
                    showQuestion(); // إظهار نفس السؤال للفريق الآخر
                } else {
                    // كلا الفريقين أخطأ - تغيير السؤال والعودة للون المحايد
                    gameState[currentCell.index].currentQuestion = getRandomQuestion();
                    closeQuestion();
                    currentTurn = 'red'; // البداية بالفريق الأحمر
                }
            }
        }

        function switchTurn() {
            currentTurn = currentTurn === 'red' ? 'green' : 'red';
        }

        function closeQuestion() {
            const modal = document.getElementById('questionModal');
            modal.style.display = 'none';
            currentCell = null;
        }

        // إضافة تأثير الانيمشن للعناصر عند التحميل
        window.addEventListener('load', function() {
            initializeGame();
            
            const elements = document.querySelectorAll('.rule-card, .team, .letter-cell');
            elements.forEach((element, index) => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    element.style.transition = 'all 0.6s ease';
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });

        // إضافة وظيفة للتحقق من الفوز
        function checkWin() {
            // يمكن إضافة منطق التحقق من الفوز هنا
            // للتحقق من تكوين خط أفقي أو رأسي
        }
    </script>
</body>
</html>
