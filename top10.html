<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ² | Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ù†Ø°Ø± Ø¨Ù† Ø¹Ù…Ø±Ùˆ Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2980b9;
            --secondary-color: #2c3e50;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --accent-color: #9b59b6;
            --light-bg: #f4f7f9;
            --white-bg: #ffffff;
            --border-color: #e2e8f0;
            --shadow: 0 8px 30px rgba(0,0,0,0.08);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--light-bg);
            color: var(--secondary-color);
            line-height: 1.8;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            background: var(--white-bg);
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.3);
        }

        /* --- Header --- */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px 25px;
            text-align: center;
            position: relative;
        }
        .header h1 { 
            font-size: 2.5em; 
            font-weight: 800; 
            margin-bottom: 10px; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.2); 
        }
        .header p { font-size: 1.1em; opacity: 0.9; }

        .school-info {
            background: rgba(255,255,255,0.95);
            padding: 20px 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }
        .info-item { 
            font-size: 0.95em; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        .info-item strong { 
            color: var(--primary-color); 
            font-weight: 700; 
        }

        /* --- Navigation --- */
        .nav {
            background: var(--white-bg);
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .nav button {
            background: transparent;
            border: none;
            color: var(--secondary-color);
            padding: 12px 24px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: var(--transition);
            border-radius: 12px;
        }
        .nav button:hover { 
            background: #f0f4f8; 
            color: var(--primary-color); 
        }
        .nav button.active {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 12px rgba(41, 128, 185, 0.3);
        }

        /* --- Content --- */
        .content { padding: 40px; }
        .section { 
            display: none; 
            animation: slideUp 0.5s ease-out; 
        }
        .section.active { display: block; }
        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .card {
            background: var(--white-bg);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }
        .card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 12px 40px rgba(0,0,0,0.05); 
        }
        .card h2 { 
            font-size: 1.8em; 
            margin-bottom: 25px; 
            color: var(--secondary-color); 
            display: flex; 
            align-items: center; 
            gap: 15px; 
        }
        .card h2::after { 
            content: ''; 
            flex: 1; 
            height: 2px; 
            background: linear-gradient(to left, transparent, #e2e8f0); 
        }

        /* --- Forms --- */
        .form-group { 
            margin-bottom: 20px; 
            position: relative; 
        }
        .form-group label { 
            display: block; 
            margin-bottom: 10px; 
            font-weight: 700; 
            color: #4a5568; 
            font-size: 0.95em; 
        }
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #edf2f7;
            border-radius: 12px;
            font-size: 1em;
            background-color: #f8fafc;
            transition: var(--transition);
            font-family: inherit;
        }
        .form-group input:focus, 
        .form-group select:focus, 
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            background-color: white;
            box-shadow: 0 0 0 4px rgba(41, 128, 185, 0.1);
        }

        .points-badge {
            position: absolute;
            left: 15px;
            top: 45px;
            background: var(--success-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 700;
            display: none;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { 
            from { transform: scale(0); } 
            to { transform: scale(1); } 
        }

        .form-row { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 25px; 
        }
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn-success { 
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); 
            color: white; 
        }
        .btn-info { 
            background: linear-gradient(135deg, #2980b9 0%, #3498db 100%); 
            color: white; 
        }
        .btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 20px rgba(0,0,0,0.15); 
            filter: brightness(1.05); 
        }

        /* --- Dashboard --- */
        .dashboard-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); 
            gap: 25px; 
        }
        .stat-card {
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            background: white;
            border: 1px solid #edf2f7;
            position: relative;
            overflow: hidden;
        }
        .stat-card::before { 
            content: ''; 
            position: absolute; 
            top: 0; 
            right: 0; 
            width: 100%; 
            height: 5px; 
        }
        .stat-card.total::before { background: var(--primary-color); }
        .stat-card.students::before { background: var(--accent-color); }
        .stat-card.average::before { background: var(--warning-color); }
        .stat-card.top::before { background: var(--success-color); }
        
        .stat-card .value { 
            font-size: 3em; 
            font-weight: 800; 
            margin-bottom: 5px; 
        }
        .stat-card .label { 
            font-size: 1em; 
            color: #718096; 
            font-weight: 600; 
        }

        /* --- Alerts --- */
        .alert { 
            padding: 20px; 
            border-radius: 12px; 
            margin: 25px 0; 
            border-right: 6px solid; 
            display: flex; 
            align-items: center; 
            gap: 15px; 
        }
        .alert-info { 
            background: #ebf8ff; 
            border-color: #3182ce; 
            color: #2c5282; 
        }
        .alert-warning { 
            background: #fffaf0; 
            border-color: #dd6b20; 
            color: #7b341e; 
        }

        /* --- Reports --- */
        .table-container { 
            overflow-x: auto; 
            border-radius: 12px; 
            border: 1px solid var(--border-color); 
        }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            background: white; 
        }
        th { 
            background: #f8fafc; 
            padding: 18px; 
            text-align: right; 
            font-weight: 700; 
            color: #4a5568; 
            border-bottom: 2px solid #edf2f7; 
        }
        td { 
            padding: 18px; 
            border-bottom: 1px solid #edf2f7; 
            font-size: 0.95em; 
        }
        tr:hover { background: #f7fafc; }

        /* --- Modal --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 80%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .close { 
            font-size: 28px; 
            font-weight: bold; 
            cursor: pointer; 
        }

        /* --- Governance List --- */
        .governance-list {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        .governance-list h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .governance-list ul {
            list-style-position: inside;
            padding-right: 0;
        }
        .governance-list li {
            margin-bottom: 10px;
            line-height: 1.8;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .header h1 { font-size: 1.8em; }
            .content { padding: 20px; }
            .nav button { padding: 10px 15px; font-size: 0.9em; }
        }

        @media print {
            .nav, .btn, .form-group, .report-controls, .no-print, .close { 
                display: none !important; 
            }
            .container { 
                box-shadow: none; 
                border: none; 
                margin: 0; 
                width: 100%; 
                max-width: 100%; 
            }
            .section { 
                display: block !important; 
                opacity: 1 !important; 
            }
            .modal { 
                position: relative; 
                display: block !important; 
                background: none; 
                backdrop-filter: none; 
            }
            .modal-content { 
                margin: 0; 
                width: 100%; 
                max-width: 100%; 
                box-shadow: none; 
                border: none; 
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Ù…Ù†ØµØ© Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²</h1>
            <p>Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ù†Ø°Ø± Ø¨Ù† Ø¹Ù…Ø±Ùˆ Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠ - Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©</p>
        </header>

        <div class="school-info">
            <div class="info-item"><strong>Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©:</strong> Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ø§Ù„Ø¯ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ</div>
            <div class="info-item"><strong>ÙˆÙƒÙŠÙ„ Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ù„Ø§Ø¨:</strong> Ø§Ù„Ø£Ø³ØªØ§Ø° Ù†ÙˆØ§Ù Ø§Ù„ØµØ¨Ø­ÙŠ</div>
            <div class="info-item"><strong>Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ:</strong> 1447-1448 Ù‡Ù€</div>
        </div>

        <nav class="nav no-print">
            <button class="active" onclick="showSection('dashboard')">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>
            <button onclick="showSection('positive')">Ø±ØµØ¯ Ø³Ù„ÙˆÙƒ Ù…ØªÙ…ÙŠØ²</button>
            <button onclick="showSection('reports')">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
            <button onclick="showSection('governance')">Ø§Ù„Ø­ÙˆÙƒÙ…Ø©</button>
        </nav>

        <main class="content">
            <!-- 1. Dashboard -->
            <section id="dashboard" class="section active">
                <div class="card">
                    <h2>Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</h2>
                    <div class="dashboard-grid" id="dashboard-grid"></div>
                </div>
            </section>

            <!-- 2. Positive Behavior -->
            <section id="positive" class="section">
                <div class="card">
                    <h2>Ø±ØµØ¯ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²</h2>
                    <div class="alert alert-warning">
                        <strong>âš  Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚:</strong> ÙŠØ¬Ø¨ Ø¥Ø±ÙØ§Ù‚ Ù…Ø§ ÙŠØ«Ø¨Øª Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ø¬Ù‡Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø£Ùˆ Ø®Ø§Ø±Ø¬Ù‡Ø§. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 20 Ø¯Ø±Ø¬Ø© Ù„ÙƒÙ„ Ø·Ø§Ù„Ø¨.
                    </div>
                    <form id="positiveForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ *</label>
                                <input type="text" id="pos_student_name" list="studentList" required placeholder="Ø§Ø¨Ø¯Ø£ Ø¨ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…...">
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„ØµÙ *</label>
                                <select id="pos_grade" required>
                                    <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„ØµÙ</option>
                                    <option value="Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·">Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·</option>
                                    <option value="Ø«Ø§Ù†ÙŠ Ù…ØªÙˆØ³Ø·">Ø«Ø§Ù†ÙŠ Ù…ØªÙˆØ³Ø·</option>
                                    <option value="Ø«Ø§Ù„Ø« Ù…ØªÙˆØ³Ø·">Ø«Ø§Ù„Ø« Ù…ØªÙˆØ³Ø·</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ÙØ¦Ø© Ø§Ù„Ø³Ù„ÙˆÙƒ *</label>
                                <select id="pos_category" required onchange="updateSubCategories()">
                                    <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                                    <option value="cat1">Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ (6 Ø¯Ø±Ø¬Ø§Øª)</option>
                                    <option value="cat2">Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© (4 Ø¯Ø±Ø¬Ø§Øª)</option>
                                    <option value="cat3">Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (2 Ø¯Ø±Ø¬Ø©)</option>
                                    <option value="cat4">ÙØ¦Ø© ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (1-6 Ø¯Ø±Ø¬Ø§Øª)</option>
                                </select>
                                <div id="points_display" class="points-badge"></div>
                            </div>
                            <div class="form-group">
                                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø³Ù„ÙˆÙƒ *</label>
                                <input type="date" id="pos_date" required>
                            </div>
                        </div>

                        <div class="form-group" id="sub_category_group" style="display:none;">
                            <label>Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© *</label>
                            <select id="pos_sub_category" onchange="handleSubCategoryChange()">
                                <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©</option>
                            </select>
                        </div>

                        <div class="form-group" id="custom_points_group" style="display:none;">
                            <label>Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø© (Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªÙˆØµÙŠØ© Ù„Ø¬Ù†Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡) *</label>
                            <input type="number" id="pos_custom_points" min="1" max="6" placeholder="Ù…Ù† 1 Ø¥Ù„Ù‰ 6 Ø¯Ø±Ø¬Ø§Øª">
                        </div>

                        <div class="form-group">
                            <label>ÙˆØµÙ Ø§Ù„Ø­Ø¯Ø« ÙˆØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¯Ù„ÙŠÙ„ *</label>
                            <textarea id="pos_impact" rows="4" required placeholder="Ø§Ø°ÙƒØ± ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø© ÙˆÙ†ÙˆØ¹ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø±ÙÙ‚ (ØµÙˆØ±ØŒ Ø´Ù‡Ø§Ø¯Ø§ØªØŒ Ø®Ø·Ø§Ø¨Ø§Øª Ø´ÙƒØ±...)"></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Ø¬Ù‡Ø© Ø§Ù„ØªØ±Ø´ÙŠØ­ *</label>
                                <input type="text" id="pos_nominator" required placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø£Ùˆ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø±Ø´Ø­Ø©">
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ *</label>
                                <input type="text" id="pos_approver" value="Ø£. Ù†ÙˆØ§Ù Ø§Ù„ØµØ¨Ø­ÙŠ" readonly>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-success">âœ“ ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²</button>
                    </form>
                </div>
            </section>

            <!-- 3. Reports -->
            <section id="reports" class="section">
                <div class="card">
                    <h2>ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²</h2>
                    <div class="report-controls no-print" style="margin-bottom: 20px; display: flex; gap: 10px;">
                        <button class="btn btn-success" style="width:auto" onclick="window.print()">ğŸ–¨ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                                    <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                                    <th>Ø§Ù„ØµÙ</th>
                                    <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                                    <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                                </tr>
                            </thead>
                            <tbody id="reports-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- 4. Governance -->
            <section id="governance" class="section">
                <div class="card">
                    <h2>Ø­ÙˆÙƒÙ…Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²</h2>
                    
                    <div class="alert alert-info">
                        <strong>ğŸ“‹ Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ø§Ù…:</strong> ÙŠÙ‡Ø¯Ù Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ² Ø¥Ù„Ù‰ ØªØ­ÙÙŠØ² ÙˆØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© Ù„Ù„Ø·Ù„Ø§Ø¨ ÙˆÙÙ‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø¹Ù„Ù…ÙŠØ© ÙˆØ±Ø³Ù…ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø©.
                    </div>

                    <div class="governance-list">
                        <h3>ğŸ¯ ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²</h3>
                        <ul>
                            <li><strong>Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²:</strong> Ù‡Ùˆ ÙƒÙ„ Ù…Ù…Ø§Ø±Ø³Ø© Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© Ù…ÙˆØ«Ù‚Ø© ÙŠÙ‚ÙˆÙ… Ø¨Ù‡Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨ ØªØ¹ÙƒØ³ Ù‚ÙŠÙ… Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·ØŒ Ø§Ù„ØªØ¹Ø§ÙˆÙ†ØŒ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©ØŒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©ØŒ Ø£Ùˆ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø°Ø§ØªÙŠ.</li>
                            <li>ÙŠØ´Ù…Ù„: Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø§Ù„Ù†ÙˆØ¹ÙŠØ©ØŒ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø¯ÙŠØ©ØŒ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©ØŒ Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©.</li>
                            <li>ÙŠÙØ³ØªØ«Ù†Ù‰: Ø£ÙŠ Ù…Ù…Ø§Ø±Ø³Ø© ØºÙŠØ± Ù…ÙˆØ«Ù‚Ø© Ø£Ùˆ Ù„Ø§ ØªØ­Ù…Ù„ Ø·Ø§Ø¨Ø¹Ù‹Ø§ Ø¥ÙŠØ¬Ø§Ø¨ÙŠÙ‹Ø§ ÙˆØ§Ø¶Ø­Ù‹Ø§.</li>
                        </ul>
                    </div>

                    <div class="governance-list">
                        <h3>ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ÙˆØ§Ù„ÙØ¦Ø§Øª</h3>
                        <ul>
                            <li><strong>Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ (6 Ø¯Ø±Ø¬Ø§Øª):</strong> Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø®Ø¯Ù…Ø© Ù…Ø¬ØªÙ…Ø¹ÙŠØ© Ø®Ø§Ø±Ø¬ÙŠØ©ØŒ ØªÙ‚Ø¯ÙŠÙ… ÙØ¹Ø§Ù„ÙŠØ© Ø­ÙˆØ§Ø±ÙŠØ©ØŒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø­Ù…Ù„Ø© ØªÙˆØ¹ÙˆÙŠØ©ØŒ Ø¹Ø±Ø¶ ØªØ¬Ø§Ø±Ø¨ Ø´Ø®ØµÙŠØ© Ù†Ø§Ø¬Ø­Ø©.</li>
                            <li><strong>Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© (4 Ø¯Ø±Ø¬Ø§Øª):</strong> Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØŒ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©ØŒ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© (ØªØµÙ…ÙŠÙ…ØŒ Ø¹Ø±ÙˆØ¶)ØŒ Ù…Ù‡Ø§Ø±Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª.</li>
                            <li><strong>Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (2 Ø¯Ø±Ø¬Ø©):</strong> ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ø¦Ù„ Ø´ÙƒØ±ØŒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©ØŒ ØªÙ‚Ø¯ÙŠÙ… Ù…Ù‚ØªØ±Ø­Ø§Øª Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©ØŒ Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ù…Ø¹ Ø§Ù„Ø²Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†.</li>
                            <li><strong>Ø§Ù„ÙØ¦Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (1-6 Ø¯Ø±Ø¬Ø§Øª):</strong> Ø³Ù„ÙˆÙƒÙŠØ§Øª Ù…ØªÙ…ÙŠØ²Ø© Ø£Ø®Ø±Ù‰ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªÙˆØµÙŠØ© Ù„Ø¬Ù†Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙˆØ§Ù„Ø¥Ø±Ø´Ø§Ø¯.</li>
                        </ul>
                    </div>

                    <div class="governance-list">
                        <h3>âœ… Ø¢Ù„ÙŠØ© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯</h3>
                        <ul>
                            <li><strong>Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠ:</strong> Ù„Ø§ ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø£ÙŠ Ø¯Ø±Ø¬Ø© Ø¥Ù„Ø§ Ø¨ÙˆØ¬ÙˆØ¯ Ø¯Ù„ÙŠÙ„ Ù…Ø§Ø¯ÙŠ (ØµÙˆØ±ØŒ Ø´Ù‡Ø§Ø¯Ø§ØªØŒ Ø®Ø·Ø§Ø¨Ø§Øª Ø´ÙƒØ±ØŒ ØªÙ‚Ø§Ø±ÙŠØ±).</li>
                            <li><strong>Ø§Ù„ØªØ±Ø´ÙŠØ­:</strong> ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù…Ø¹Ù„Ù… Ø£Ùˆ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø®ØªØµØ© Ø¨ØªØ±Ø´ÙŠØ­ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ø¹ ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ø³Ù„ÙˆÙƒ ÙˆØ§Ù„Ø¯Ù„ÙŠÙ„.</li>
                            <li><strong>Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯:</strong> ÙŠØ¹ØªÙ…Ø¯ ÙˆÙƒÙŠÙ„ Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…Ø³Ø¬Ù„ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚.</li>
                            <li><strong>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰:</strong> 20 Ø¯Ø±Ø¬Ø© Ù„ÙƒÙ„ Ø·Ø§Ù„Ø¨ Ø·ÙˆØ§Ù„ Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ.</li>
                        </ul>
                    </div>

                    <div class="governance-list">
                        <h3>ğŸ” Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª</h3>
                        <ul>
                            <li><strong>Ø§Ù„Ù…Ø¹Ù„Ù…ÙˆÙ†:</strong> ØªØ±Ø´ÙŠØ­ Ø§Ù„Ø·Ù„Ø§Ø¨ØŒ ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§ØªØŒ Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±.</li>
                            <li><strong>ÙˆÙƒÙŠÙ„ Ø´Ø¤ÙˆÙ† Ø§Ù„Ø·Ù„Ø§Ø¨:</strong> Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ§ØªØŒ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ØŒ Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©.</li>
                            <li><strong>Ù„Ø¬Ù†Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙˆØ§Ù„Ø¥Ø±Ø´Ø§Ø¯:</strong> ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ÙÙŠ Ø§Ù„ÙØ¦Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©ØŒ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©.</li>
                            <li><strong>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©:</strong> Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¹Ø§Ù…ØŒ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø³ÙŠØ§Ø³Ø§ØªØŒ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©.</li>
                        </ul>
                    </div>

                    <div class="alert alert-warning" style="margin-top: 20px;">
                        <strong>ğŸ“Œ Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ø§Ù…Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ø®ØµØµ Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ² ÙÙ‚Ø·. Ù„Ø§ ÙŠØªØ¶Ù…Ù† Ø£ÙŠ Ø¢Ù„ÙŠØ© Ù„Ù„Ø®ØµÙ… Ø£Ùˆ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§ØªØŒ ÙˆÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ÙÙŠ Ø´Ø®ØµÙŠØ© Ø§Ù„Ø·Ø§Ù„Ø¨.
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Student Report Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header no-print">
                <h2 id="modalStudentName">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody"></div>
            <div class="no-print" style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn btn-info" onclick="window.print()">ğŸ–¨ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
            </div>
        </div>
    </div>

    <datalist id="studentList"></datalist>

    <!-- Firebase & Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB7mn5gg8LDOwnYsqmxd2UwdiDWNRPuoAQ",
            authDomain: "top10-a6e0e.firebaseapp.com",
            projectId: "top10-a6e0e",
            storageBucket: "top10-a6e0e.firebasestorage.app",
            messagingSenderId: "985038639156",
            appId: "1:985038639156:web:af5c4031f50ddfc85b3a61",
            measurementId: "G-LXG3X6WXEE"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const behaviorCollection = collection(db, "behavior_records");

        // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨
        const STUDENT_DATABASE = [
            {"name": "Ø£Ø­Ù…Ø¯ ÙÙˆØ§Ø² Ø¨Ù† Ø³Ø¹Ø¯ÙˆÙ† Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø£Ø³Ø§Ù…Ù‡ Ø³Ø¹ÙˆØ¯ Ø­Ø§Ø¬Ø± Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø§Ø³Ø§Ù…Ù‡ Ù…Ø§Ø¬Ø¯ Ø¶ÙŠÙ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø²ÙˆÙŠÙƒÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¨Ø§Ø³Ù… Ø³ÙŠÙ Ø¨Ù† Ø¹Ø¨ÙŠØ¯ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø«Ø§Ù…Ø± ØªØ±ÙƒÙŠ Ø§Ù„Ù†Ø´Ù…ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø«Ø§Ù…Ø± Ø±Ø§Ø¦Ø¯ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø¨Ù† Ø­Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø³Ø§ÙŠØ± Ø«Ø§Ù…Ø± Ø¨Ù† Ø³Ø§Ø¦Ø± Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø³Ø¹ÙˆØ¯ Ø¹Ù…Ø§Ø¯ Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­Ø§Ø²Ù…ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø³Ù„Ø·Ø§Ù† Ø³Ø§Ø·ÙŠ Ø³Ù…Ø±Ø§Ù† Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø³Ù„Ø·Ø§Ù† ÙÙ‡Ø¯ Ø¨Ù† Ø­Ø§Ø³Ù† Ø§Ù„Ø¹Ù…Ø±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ø¨Ø¯Ø§Ù„Ø§Ù„Ù‡ Ø¹ÙˆØ¶ Ù†ÙˆÙŠÙØ¹ Ø§Ù„Ø²ÙˆÙŠÙƒÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø®Ù„ÙˆÙŠ Ø¨Ù† Ù†Ø§ÙØ¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ÙÙ‡Ø¯ Ø¹Ø§Ù…Ø± Ø§Ù„ØºÙ†Ø§Ù…", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø±Ø¨ÙŠØ¹ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ø±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ø³Ø§Ù Ø¨Ø¯Ø± Ø¨Ø´ÙŠØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ù…Ø± Ø§Ø³Ø§Ù…Ù‡ Ø¨Ù† Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ù…Ø± Ù…Ù†ØµÙˆØ± Ø¨Ù† Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "ÙÙŠØµÙ„ ÙÙˆØ§Ø² Ù…Ø­Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø¨Ø´ÙŠØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ù…Ø´Ø§Ø±ÙŠ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ù…ØµØ¹Ø¨ Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø¨Ù† Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ø±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ù†Ø§Ø¯Ø± Ø³Ø¹ÙˆØ¯ Ø¨Ù† Ø­Ù…ÙŠØ¯ Ø§Ù„Ø¹Ù…Ø±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ù†Ø§ÙŠÙ Ø¹ÙŠØ¯ Ø­Ù…ÙŠØ¯ Ø§Ù„Ø¹Ù…Ø±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ù‡Ø§ÙŠÙ„ ØµØ§Ù„Ø­ Ø¹Ø§Ø¦Ø¶ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "ÙˆØ³Ø§Ù… Ø¬Ø§Ø¨Ø± Ø¹ÙŠØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "ÙˆØ³Ø§Ù… Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "ÙŠØ§Ø³Ø± Ø®Ø§Ù„Ø¯ Ù…Ø¹Ø¬Ù„ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "ÙŠØ²ÙŠØ¯ ÙÙˆØ§Ø² Ø®Ù„ÙŠÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "ÙŠØ¹Ù‚ÙˆØ¨ Ù…Ø­Ù…Ø¯ Ø¹Ø§ÙŠØ¯ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø§Ø­Ù…Ø¯ Ø­Ø³ÙŠÙ† Ø¹Ù„ÙˆÙŠ Ø­Ø³ÙŠÙ† Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø£Ø³Ø§Ù…Ù‡ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø¨Ù† Ø³Ø¹ÙŠØ¯ Ø§Ù„Ø¹ÙˆÙÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø§Ù„Ø¨Ø±Ø§Ø¡ Ù…Ø­Ù…Ø¯ Ø¹Ø²ÙŠØ² Ø§Ù„Ø¹ÙˆÙÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¨ØªØ§Ù„ Ù…ÙˆØ³Ù‰ Ø¹Ù…Ø§Ø± Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "ØªØ±ÙƒÙŠ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ø§Ù„Ù… Ø§Ù„Ø¬Ù‡Ù†ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø­Ø§Ø²Ù… Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø¨Ù† Ø³Ø¹Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø¨ Ø¹Ø¨Ø¯ Ø±Ø¨Ù‡ Ø§Ù„ÙƒØ­ÙŠÙ„ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø®Ø§Ù„Ø¯ Ù…Ù†ØµÙˆØ± Ø¨Ù† Ù…Ù†Ø§ÙˆØ± Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø±ÙŠØ§Ù† Ù…Ø§Ø¬Ø¯ Ø¹ÙŠØ¯ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø²ÙŠØ§Ø¯ ÙØ¤Ø§Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø³Ø¹Ø¯ ÙÙ‡Ø¯ Ù…Ø³Ø¹Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø³Ø¹ÙˆØ¯ ÙÙŠØµÙ„ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø®Ø±ÙŠÙ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø³Ù„Ø·Ø§Ù† Ù…Ø§Ø¬Ø¯ Ø¨Ù† Ù…Ø¹ØªØ§Ø¯ Ø§Ù„Ù…ÙˆÙ„Ø¯", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø´Ø§Ù…Ø® Ù†Ø§Ø¯Ø± Ø³Ù…Ø§Ø± Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ø§Ø¯Ù„ Ù…Ø­Ù…Ø¯ ØºØ§Ø²ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø¨Ù† Ø§Ù„Ù†Ø´Ù…ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹ØµØ§Ù… Ø¹Ø¨Ø¯Ø§Ù„Ø³ØªØ§Ø± Ø³Ø§Ù„Ù… Ø§Ù„Ø¹ÙˆÙÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"},
            {"name": "Ø¹Ù‚Ø§Ø¨ Ù…Ø­Ù…Ø¯ Ø¹Ø§ÙŠØ¯ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "grade": "Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·"}
        ];

        // ØªØµÙ†ÙŠÙ Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ§Øª
        const BEHAVIOR_MAP = {
            cat1: { 
                points: 6, 
                items: [
                    "Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ¹Ø¯Ù… ØºÙŠØ§Ø¨Ù‡ Ø¨Ø¯ÙˆÙ† Ø¹Ø°Ø± Ø®Ù„Ø§Ù„ Ø§Ù„ÙØµÙ„",
                    "Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ© Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©",
                    "ØªÙ‚Ø¯ÙŠÙ… ÙØ¹Ø§Ù„ÙŠØ© Ø­ÙˆØ§Ø±ÙŠØ©",
                    "Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø­Ù…Ù„Ø© ØªÙˆØ¹ÙˆÙŠØ©",
                    "Ø¹Ø±Ø¶ ØªØ¬Ø§Ø±Ø¨ Ø´Ø®ØµÙŠØ© Ù†Ø§Ø¬Ø­Ø©",
                    "Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚ Ø¨Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø£Ùˆ Ø¯ÙˆØ±Ø© ØªØ·ÙˆÙŠØ±ÙŠØ©"
                ] 
            },
            cat2: { 
                points: 4, 
                items: [
                    "Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ (Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØŒ Ø§Ù„ØªØ¹Ù„Ù… Ø¨Ø§Ù„Ø£Ù‚Ø±Ø§Ù†)",
                    "Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© (Ø§Ù„ØªØ®Ø·ÙŠØ·ØŒ Ø§Ù„ØªØ­ÙÙŠØ²)",
                    "Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© (Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ø±ÙˆØ¶ØŒ ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰)",
                    "Ù…Ù‡Ø§Ø±Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ…"
                ] 
            },
            cat3: { 
                points: 2, 
                items: [
                    "ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø© Ø´ÙƒØ± (Ù„Ù„ÙˆØ·Ù†ØŒ Ù„Ù„Ù‚ÙŠØ§Ø¯Ø©ØŒ Ù„Ù„Ù…Ø¹Ù„Ù…)",
                    "Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©",
                    "ØªÙ‚Ø¯ÙŠÙ… Ù…Ù‚ØªØ±Ø­ Ù„ØµØ§Ù„Ø­ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ",
                    "Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù…Ø¹ Ø§Ù„Ø²Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†"
                ] 
            },
            cat4: { 
                points: 0, 
                items: [
                    "Ø³Ù„ÙˆÙƒ Ù…ØªÙ…ÙŠØ² Ø¢Ø®Ø± (ÙŠØªØ·Ù„Ø¨ ØªÙˆØµÙŠØ© Ù„Ø¬Ù†Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡)"
                ] 
            }
        };

        // Ø¯ÙˆØ§Ù„ Ø¹Ø§Ù…Ø©
        window.showSection = function(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            const btn = document.querySelector(`button[onclick="showSection('${id}')"]`);
            if(btn) btn.classList.add('active');
            if(id === 'dashboard') updateDashboard();
            if(id === 'reports') generateMainReport();
        };

        window.updateSubCategories = function() {
            const cat = document.getElementById('pos_category').value;
            const subGroup = document.getElementById('sub_category_group');
            const subSelect = document.getElementById('pos_sub_category');
            const customGroup = document.getElementById('custom_points_group');
            const badge = document.getElementById('points_display');

            subSelect.innerHTML = '<option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©</option>';
            
            if(cat) {
                subGroup.style.display = 'block';
                BEHAVIOR_MAP[cat].items.forEach(item => {
                    const opt = document.createElement('option');
                    opt.value = item;
                    opt.textContent = item;
                    subSelect.appendChild(opt);
                });
                
                if(cat === 'cat4') {
                    customGroup.style.display = 'block';
                    badge.style.display = 'none';
                } else {
                    customGroup.style.display = 'none';
                    badge.textContent = `+${BEHAVIOR_MAP[cat].points} Ø¯Ø±Ø¬Ø©`;
                    badge.style.display = 'block';
                }
            }
        };

        window.handleSubCategoryChange = function() {
            const badge = document.getElementById('points_display');
            badge.style.animation = 'none';
            badge.offsetHeight; 
            badge.style.animation = 'popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
        };

        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function fetchAllData() {
            const q = query(behaviorCollection, orderBy("timestamp", "desc"));
            const querySnapshot = await getDocs(q);
            const data = [];
            querySnapshot.forEach((doc) => {
                const record = { id: doc.id, ...doc.data() };
                // ÙÙ„ØªØ±Ø© Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ§Øª Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ÙÙ‚Ø·
                if (record.type === 'positive') {
                    data.push(record);
                }
            });
            return data;
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', async () => {
            const today = new Date().toISOString().split('T')[0];
            if(document.getElementById('pos_date')) document.getElementById('pos_date').value = today;

            // Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨
            const list = document.getElementById('studentList');
            STUDENT_DATABASE.forEach(s => {
                const opt = document.createElement('option');
                opt.value = s.name;
                list.appendChild(opt);
            });

            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ø§Ù„Ø¨
            const studentInput = document.getElementById('pos_student_name');
            if(studentInput) {
                studentInput.addEventListener('input', function() {
                    const student = STUDENT_DATABASE.find(s => s.name === this.value);
                    if(student) {
                        document.getElementById('pos_grade').value = student.grade;
                    }
                });
            }

            // Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ²
            const posForm = document.getElementById('positiveForm');
            if(posForm) {
                posForm.onsubmit = async function(e) {
                    e.preventDefault();
                    
                    const studentName = document.getElementById('pos_student_name').value;
                    const cat = document.getElementById('pos_category').value;
                    const points = cat === 'cat4' ? parseInt(document.getElementById('pos_custom_points').value) : BEHAVIOR_MAP[cat].points;
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ØªØ¬Ø§ÙˆØ² 20 Ø¯Ø±Ø¬Ø©
                    const data = await fetchAllData();
                    const studentRecords = data.filter(r => r.studentName === studentName);
                    const currentTotal = studentRecords.reduce((sum, r) => sum + (r.points || 0), 0);
                    
                    if (currentTotal + points > 20) {
                        alert(`âš  ØªØ­Ø°ÙŠØ±: Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ (${currentTotal}) + Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (${points}) = ${currentTotal + points} Ø¯Ø±Ø¬Ø©.\nØ§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ø§Ù„Ù…Ø³Ù…ÙˆØ­: 20 Ø¯Ø±Ø¬Ø©.\n\nÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„Ø³Ù„ÙˆÙƒ.`);
                        return;
                    }
                    
                    try {
                        await addDoc(behaviorCollection, {
                            type: 'positive',
                            timestamp: Date.now(),
                            date: document.getElementById('pos_date').value,
                            studentName: studentName,
                            grade: document.getElementById('pos_grade').value,
                            category: document.getElementById('pos_sub_category').value,
                            points: points,
                            impact: document.getElementById('pos_impact').value,
                            nominator: document.getElementById('pos_nominator').value,
                            approver: document.getElementById('pos_approver').value
                        });
                        alert('âœ… ØªÙ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ØªÙ…ÙŠØ² Ø¨Ù†Ø¬Ø§Ø­');
                        this.reset();
                        document.getElementById('pos_date').value = today;
                        document.getElementById('sub_category_group').style.display = 'none';
                        document.getElementById('custom_points_group').style.display = 'none';
                        document.getElementById('points_display').style.display = 'none';
                        showSection('dashboard');
                    } catch (error) {
                        console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸: ", error);
                        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸');
                    }
                };
            }

            showSection('dashboard');
        });

        // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
        async function updateDashboard() {
            const data = await fetchAllData();
            const grid = document.getElementById('dashboard-grid');
            
            const totalBehaviors = data.length;
            const uniqueStudents = [...new Set(data.map(r => r.studentName))].length;
            const totalPoints = data.reduce((sum, r) => sum + (r.points || 0), 0);
            const avgPoints = uniqueStudents > 0 ? (totalPoints / uniqueStudents).toFixed(1) : 0;
            
            // Ø¥ÙŠØ¬Ø§Ø¯ Ø£Ø¹Ù„Ù‰ Ø·Ø§Ù„Ø¨
            const studentStats = {};
            data.forEach(r => {
                if(!studentStats[r.studentName]) {
                    studentStats[r.studentName] = 0;
                }
                studentStats[r.studentName] += r.points || 0;
            });
            
            const topStudent = Object.entries(studentStats).sort((a, b) => b[1] - a[1])[0];
            const topStudentDisplay = topStudent ? `${topStudent[0].split(' ')[0]} (${topStudent[1]})` : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯';
            
            grid.innerHTML = `
                <div class="stat-card total">
                    <div class="value">${totalBehaviors}</div>
                    <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</div>
                </div>
                <div class="stat-card students">
                    <div class="value">${uniqueStudents}</div>
                    <div class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</div>
                </div>
                <div class="stat-card average">
                    <div class="value">${avgPoints}</div>
                    <div class="label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©</div>
                </div>
                <div class="stat-card top">
                    <div class="value" style="font-size: 1.8em;">${topStudentDisplay}</div>
                    <div class="label">Ø£Ø¹Ù„Ù‰ Ø·Ø§Ù„Ø¨ ØªØ­ØµÙŠÙ„Ø§Ù‹</div>
                </div>
            `;
        }

        // ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…
        async function generateMainReport() {
            const data = await fetchAllData();
            const tbody = document.getElementById('reports-tbody');
            const studentStats = {};

            data.forEach(r => {
                if(!studentStats[r.studentName]) {
                    studentStats[r.studentName] = { 
                        name: r.studentName, 
                        grade: r.grade, 
                        totalPoints: 0,
                        count: 0
                    };
                }
                studentStats[r.studentName].totalPoints += r.points || 0;
                studentStats[r.studentName].count += 1;
            });

            const students = Object.values(studentStats).sort((a, b) => b.totalPoints - a.totalPoints);
            
            tbody.innerHTML = students.map((s, i) => `
                <tr>
                    <td><strong>${i + 1}</strong></td>
                    <td><strong>${s.name}</strong></td>
                    <td>${s.grade}</td>
                    <td style="color: var(--success-color); font-weight: bold;">${s.totalPoints} Ù†Ù‚Ø·Ø©</td>
                    <td>${s.count}</td>
                    <td>
                        <button class="btn btn-info" style="padding: 8px 15px; font-size: 0.85em;" onclick="viewStudentReport('${s.name}')">ğŸ“„ Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="6" style="text-align:center; color: #718096;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</td></tr>';
        }

        // ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„ÙØ±Ø¯ÙŠ
        window.viewStudentReport = async function(studentName) {
            const data = await fetchAllData();
            const studentData = data.filter(r => r.studentName === studentName).sort((a, b) => new Date(a.date) - new Date(b.date));
            const student = STUDENT_DATABASE.find(s => s.name === studentName) || { name: studentName, grade: 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' };
            
            let totalPoints = 0;
            
            let html = `
                <div style="text-align: center; margin-bottom: 30px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px;">
                    <h3 style="font-size: 1.8em; margin-bottom: 5px;">${student.name}</h3>
                    <p style="font-size: 1.1em;">Ø§Ù„ØµÙ: ${student.grade}</p>
                    <p style="font-size: 0.9em; opacity: 0.9;">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}</p>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©</th>
                                <th>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø±Ø´Ø­Ø©</th>
                                <th>Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</th>
                                <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            studentData.forEach((r, index) => {
                totalPoints += r.points || 0;
                html += `
                    <tr>
                        <td><strong>${index + 1}</strong></td>
                        <td>${r.date}</td>
                        <td>${r.category}</td>
                        <td>${r.nominator || '-'}</td>
                        <td>${r.approver || '-'}</td>
                        <td style="color: var(--success-color); font-weight: bold;">+${r.points}</td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; padding: 25px; background: #f0fdf4; border-radius: 12px; border: 2px solid var(--success-color);">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: center;">
                        <div>
                            <div style="font-size: 0.9em; color: #718096; margin-bottom: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª</div>
                            <div style="font-size: 2.5em; font-weight: 800; color: var(--primary-color);">${studentData.length}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9em; color: #718096; margin-bottom: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©</div>
                            <div style="font-size: 2.5em; font-weight: 800; color: var(--success-color);">${totalPoints}/20</div>
                        </div>
                    </div>
                </div>
            `;

            if (totalPoints >= 15) {
                html += `
                    <div class="alert alert-info" style="margin-top: 20px;">
                        <strong>ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!</strong> Ø§Ù„Ø·Ø§Ù„Ø¨ Ø­Ù‚Ù‚ ${totalPoints} Ù†Ù‚Ø·Ø© Ù…Ù† Ø£ØµÙ„ 20. Ø£Ø¯Ø§Ø¡ Ù…ØªÙ…ÙŠØ² ÙŠØ³ØªØ­Ù‚ Ø§Ù„ØªÙƒØ±ÙŠÙ… ÙˆØ§Ù„ØªØ´Ø¬ÙŠØ¹.
                    </div>
                `;
            }

            document.getElementById('modalBody').innerHTML = html;
            document.getElementById('studentModal').style.display = "block";
        };

        window.closeModal = function() {
            document.getElementById('studentModal').style.display = "none";
        };

        window.onclick = function(event) {
            const modal = document.getElementById('studentModal');
            if (event.target == modal) {
                closeModal();
            }
        };
    </script>
</body>
</html>

