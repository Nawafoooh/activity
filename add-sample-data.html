<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #4F46E5;
            margin-bottom: 20px;
        }
        .warning {
            background: #FEF3C7;
            border: 2px solid #F59E0B;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .success {
            background: #D1FAE5;
            border: 2px solid #10B981;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        .error {
            background: #FEE2E2;
            border: 2px solid #EF4444;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        button {
            background: #4F46E5;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 10px 10px 10px 0;
        }
        button:hover {
            background: #4338CA;
        }
        button:disabled {
            background: #9CA3AF;
            cursor: not-allowed;
        }
        .log {
            background: #F3F4F6;
            padding: 15px;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 14px;
            margin-top: 20px;
            display: none;
        }
        .log-item {
            padding: 5px;
            border-bottom: 1px solid #E5E7EB;
        }
        .log-item:last-child {
            border-bottom: none;
        }
        .progress {
            background: #E5E7EB;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
            display: none;
        }
        .progress-bar {
            background: #10B981;
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©</h1>
        
        <div class="warning">
            âš ï¸ <strong>ØªØ­Ø°ÙŠØ±:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø³ÙŠØ¶ÙŠÙ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙÙŠ Firestore. 
            ØªØ£ÙƒØ¯ Ù…Ù† ØªÙƒÙˆÙŠÙ† Firebase Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡.
        </div>

        <div id="success-message" class="success"></div>
        <div id="error-message" class="error"></div>

        <div style="margin: 20px 0;">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ§Øª:</h3>
            <ol>
                <li>ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ« <code>firebaseConfig</code> ÙÙŠ Ù…Ù„Ù app.js</li>
                <li>Ø§ÙØªØ­ Firebase Console ÙˆØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Firestore ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡</li>
                <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø£Ø¯Ù†Ø§Ù‡ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
            </ol>
        </div>

        <button id="add-all-btn" onclick="addAllData()">Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        <button id="add-subjects-btn" onclick="addSubjects()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ§Ø¯ ÙÙ‚Ø·</button>
        <button id="add-lessons-btn" onclick="addLessons()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±ÙˆØ³ ÙÙ‚Ø·</button>
        <button id="clear-btn" onclick="clearData()">Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>

        <div id="progress" class="progress">
            <div id="progress-bar" class="progress-bar"></div>
        </div>

        <div id="log" class="log"></div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getFirestore, 
            collection, 
            doc, 
            setDoc,
            getDocs,
            deleteDoc
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // ØªÙƒÙˆÙŠÙ† Firebase Ù…Ù† Ù…Ø´Ø±ÙˆØ¹Ùƒ
        const firebaseConfig = {
            apiKey: "AIzaSyBaY75jwos44EbgZMlhIcU_YfrGeKY7r3w",
            authDomain: "naj7-7da9d.firebaseapp.com",
            projectId: "naj7-7da9d",
            storageBucket: "naj7-7da9d.firebasestorage.app",
            messagingSenderId: "72751584563",
            appId: "1:72751584563:web:8562f042882919d2c4da46"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        const sampleData = {
            subjects: [
                {
                    id: "math",
                    name: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
                    description: "Ø­Ø³Ø§Ø¨ØŒ Ø¬Ø¨Ø±ØŒ Ù‡Ù†Ø¯Ø³Ø© Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©",
                    icon: "ğŸ”¢",
                    lessonsCount: 10,
                    isFree: true,
                    order: 1
                },
                {
                    id: "science",
                    name: "Ø§Ù„Ø¹Ù„ÙˆÙ…",
                    description: "ÙÙŠØ²ÙŠØ§Ø¡ØŒ ÙƒÙŠÙ…ÙŠØ§Ø¡ØŒ Ø£Ø­ÙŠØ§Ø¡",
                    icon: "ğŸ”¬",
                    lessonsCount: 12,
                    isFree: false,
                    order: 2
                },
                {
                    id: "arabic",
                    name: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                    description: "Ù†Ø­ÙˆØŒ ØµØ±ÙØŒ Ø¨Ù„Ø§ØºØ©ØŒ Ù‚Ø±Ø§Ø¡Ø©",
                    icon: "ğŸ“–",
                    lessonsCount: 15,
                    isFree: true,
                    order: 3
                }
            ],
            lessons: [
                {
                    id: "math-lesson-1",
                    subjectId: "math",
                    title: "Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµØ­ÙŠØ­Ø©",
                    description: "ØªØ¹Ù„Ù… Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµØ­ÙŠØ­Ø© ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¹Ù„ÙŠÙ‡Ø§",
                    icon: "â•",
                    content: "Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ØªØ´Ù…Ù„ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆØ£Ø¶Ø¯Ø§Ø¯Ù‡Ø§ ÙˆØ§Ù„ØµÙØ±.",
                    videoUrl: "lessons/math/integers.mp4",
                    images: ["lessons/math/integers-number-line.jpg"],
                    isFree: true,
                    order: 1,
                    duration: 15
                },
                {
                    id: "math-lesson-2",
                    subjectId: "math",
                    title: "Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ³ÙˆØ±",
                    description: "Ø¬Ù…Ø¹ ÙˆØ·Ø±Ø­ ÙˆØ¶Ø±Ø¨ ÙˆÙ‚Ø³Ù…Ø© Ø§Ù„ÙƒØ³ÙˆØ±",
                    icon: "ğŸ”¢",
                    content: "Ø§Ù„ÙƒØ³ÙˆØ± Ù‡ÙŠ Ø£Ø¹Ø¯Ø§Ø¯ ØªÙ…Ø«Ù„ Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† Ø§Ù„ÙƒÙ„.",
                    videoUrl: "lessons/math/fractions.mp4",
                    images: ["lessons/math/fractions-addition.jpg"],
                    isFree: true,
                    order: 2,
                    duration: 20
                },
                {
                    id: "arabic-lesson-1",
                    subjectId: "arabic",
                    title: "Ø§Ù„Ù…Ø¨ØªØ¯Ø£ ÙˆØ§Ù„Ø®Ø¨Ø±",
                    description: "ØªØ¹Ù„Ù… Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ©",
                    icon: "âœï¸",
                    content: "Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ© ØªØªÙƒÙˆÙ† Ù…Ù† Ø±ÙƒÙ†ÙŠÙ† Ø£Ø³Ø§Ø³ÙŠÙŠÙ†: Ø§Ù„Ù…Ø¨ØªØ¯Ø£ ÙˆØ§Ù„Ø®Ø¨Ø±.",
                    videoUrl: "lessons/arabic/mubtada.mp4",
                    images: ["lessons/arabic/mubtada-examples.jpg"],
                    isFree: true,
                    order: 1,
                    duration: 12
                }
            ]
        };

        // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            logDiv.style.display = 'block';
            
            const item = document.createElement('div');
            item.className = 'log-item';
            item.textContent = `${new Date().toLocaleTimeString('ar-SA')} - ${message}`;
            
            if (type === 'error') item.style.color = '#EF4444';
            if (type === 'success') item.style.color = '#10B981';
            
            logDiv.appendChild(item);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function showProgress(percent) {
            const progress = document.getElementById('progress');
            const progressBar = document.getElementById('progress-bar');
            
            progress.style.display = 'block';
            progressBar.style.width = percent + '%';
        }

        function showMessage(message, type) {
            const successDiv = document.getElementById('success-message');
            const errorDiv = document.getElementById('error-message');
            
            if (type === 'success') {
                successDiv.textContent = message;
                successDiv.style.display = 'block';
                errorDiv.style.display = 'none';
            } else {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
            }
        }

        function disableButtons(disabled) {
            document.querySelectorAll('button').forEach(btn => {
                btn.disabled = disabled;
            });
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ§Ø¯
        async function addSubjects() {
            disableButtons(true);
            log('Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ§Ø¯...');
            
            try {
                let completed = 0;
                const total = sampleData.subjects.length;
                
                for (const subject of sampleData.subjects) {
                    const { id, ...data } = subject;
                    await setDoc(doc(db, 'subjects', id), data);
                    
                    completed++;
                    showProgress((completed / total) * 100);
                    log(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ©: ${data.name}`, 'success');
                }
                
                showMessage('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } catch (error) {
                log(`Ø®Ø·Ø£: ${error.message}`, 'error');
                showMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ§Ø¯', 'error');
            } finally {
                disableButtons(false);
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±ÙˆØ³
        async function addLessons() {
            disableButtons(true);
            log('Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±ÙˆØ³...');
            
            try {
                let completed = 0;
                const total = sampleData.lessons.length;
                
                for (const lesson of sampleData.lessons) {
                    const { id, ...data } = lesson;
                    await setDoc(doc(db, 'lessons', id), data);
                    
                    completed++;
                    showProgress((completed / total) * 100);
                    log(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ©: ${data.title}`, 'success');
                }
                
                showMessage('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } catch (error) {
                log(`Ø®Ø·Ø£: ${error.message}`, 'error');
                showMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±ÙˆØ³', 'error');
            } finally {
                disableButtons(false);
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function addAllData() {
            disableButtons(true);
            log('========== Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ==========');
            
            try {
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ§Ø¯
                await addSubjects();
                
                // Ø§Ù†ØªØ¸Ø§Ø± Ù‚ØµÙŠØ±
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±ÙˆØ³
                await addLessons();
                
                log('========== Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­ ==========', 'success');
                showMessage('ğŸ‰ ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            } catch (error) {
                log(`Ø®Ø·Ø£ Ø¹Ø§Ù…: ${error.message}`, 'error');
                showMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', 'error');
            } finally {
                disableButtons(false);
            }
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function clearData() {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                return;
            }
            
            disableButtons(true);
            log('Ø¨Ø¯Ø¡ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
            
            try {
                // Ù…Ø³Ø­ Ø§Ù„Ù…ÙˆØ§Ø¯
                const subjectsSnapshot = await getDocs(collection(db, 'subjects'));
                for (const document of subjectsSnapshot.docs) {
                    await deleteDoc(doc(db, 'subjects', document.id));
                    log(`ØªÙ… Ù…Ø³Ø­ Ù…Ø§Ø¯Ø©: ${document.id}`, 'info');
                }
                
                // Ù…Ø³Ø­ Ø§Ù„Ø¯Ø±ÙˆØ³
                const lessonsSnapshot = await getDocs(collection(db, 'lessons'));
                for (const document of lessonsSnapshot.docs) {
                    await deleteDoc(doc(db, 'lessons', document.id));
                    log(`ØªÙ… Ù…Ø³Ø­ Ø¯Ø±Ø³: ${document.id}`, 'info');
                }
                
                showMessage('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            } catch (error) {
                log(`Ø®Ø·Ø£: ${error.message}`, 'error');
                showMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø³Ø­', 'error');
            } finally {
                disableButtons(false);
            }
        }

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù…
        window.addSubjects = addSubjects;
        window.addLessons = addLessons;
        window.addAllData = addAllData;
        window.clearData = clearData;

        // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.addEventListener('load', () => {
            if (firebaseConfig.apiKey === "YOUR_API_KEY") {
                showMessage('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« firebaseConfig ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹!', 'error');
                disableButtons(true);
            } else {
                log('âœ… Firebase Ù…ØªØµÙ„ Ø¨Ù†Ø¬Ø§Ø­');
            }
        });
    </script>
</body>
</html>
